@page "/exams"
@inherits RuiComponentBase<IndexViewModel>

<PageContainer Title="Exams">
    <Breadcrumb>
        <Breadcrumb>
            <BreadcrumbItem>Home</BreadcrumbItem>
            <BreadcrumbItem>Exams</BreadcrumbItem>
        </Breadcrumb>
    </Breadcrumb>
    <Content>
        <div class="pageHeaderContent__b__1">
            <p>
                Paragraph: Ant.design, the service design platform of Ant Financial, seamlessly connects to the ecosystem of Ant Financial with minimal workload.
                Provide experience solutions that span design and development.
            </p>
            <div class="contentLink">
                <a>
                    <img alt="" src="https://gw.alipayobjects.com/zos/rmsportal/MjEImQtenlyueSmVEfUD.svg" />
                    Quick start
                </a>
                <a>
                    <img alt="" src="https://gw.alipayobjects.com/zos/rmsportal/NbuDUAuBlIApFuDvWiND.svg" />
                    Product Introduction
                </a>
                <a>
                    <img alt="" src="https://gw.alipayobjects.com/zos/rmsportal/ohOEPSYdDTNnyMbGuyLb.svg" />
                    Product Documentation
                </a>
            </div>
        </div>
    </Content>
    <ExtraContent>
        <div class="extraImg">
            <img alt="This is a title"
                 src="https://gw.alipayobjects.com/zos/rmsportal/RzwpdLnhmvDJToTdfDPe.png" />
        </div>
    </ExtraContent>
    <ChildContent>
        <div class="cardList">
            <AntList TItem="Maincotech.ExamAssitant.Dtos.ExamDto"
                     DataSource="ViewModel.Items"
                     ItemLayout="ListItemLayout.Horizontal"
                     Grid="_listGridType">
                <ListItem NoFlex Grid="_listGridType">
                    @if (string.IsNullOrEmpty(context.Id))
                    {
                        <Button Type="dashed" class="newButton">
                            <Icon Type="plus" Theme="outline" /> Add Product
                        </Button>
                    }
                    else
                    {
                        <Card Hoverable Bordered Class="card" Actions="@GetExamActions(context)">
                            <CardMeta>
                                @*<AvatarTemplate>
                                        <img alt="" class="cardAvatar" src="@context.Avatar" />
                                    </AvatarTemplate>*@
                                <TitleTemplate>
                                    <a>@context.Name</a>
                                </TitleTemplate>
                                <DescriptionTemplate>
                                    <p>
                                        <Icon Type="bank" Theme="twotone" />
                                        Vendor: @context.Provider
                                    </p>
                                    <p>
                                        <Icon Type="field-time" Theme="outline" />
                                        Duration: @context.Duration munitues
                                    </p>
                                    <p>
                                        <Icon Type="profile" Theme="twotone" />
                                        Sample questions: @context.NumberOfQuestions
                                    </p>
                                    <p>
                                        <Icon Type="calendar" Theme="twotone" />
                                        Last update On: @context.UpdateOn
                                    </p>
                                </DescriptionTemplate>
                            </CardMeta>
                        </Card>}
                </ListItem>
            </AntList>
        </div>
    </ChildContent>
</PageContainer>

@code
{
    private IList<RenderFragment> GetExamActions(Maincotech.ExamAssitant.Dtos.ExamDto exam)
    {
        ////at.alicdn.com/t/font_2504866_9vm4yvl6p8e.js
        var result = new List<RenderFragment>();
        result.Add(@<AntDesign.Tooltip Title="@("Design Exam")"><a href="@($"exams/design/{exam.Id}")"><IconFont Type="icondesign" /></a></AntDesign.Tooltip>);
result.Add(@<AntDesign.Tooltip Title="@("Edit Questions")"><a href="@($"exams/edit/{exam.Id}")"><IconFont Type="icon-exam" /></a></AntDesign.Tooltip>);
result.Add(@<AntDesign.Tooltip Title="@("Delete Exam")">
    <Popconfirm Title=@($"Are you sure to delete exam ({exam.Name}) with {exam.NumberOfQuestions} questions?")
                OnConfirm="async() => await OnDeleteExam(exam)">
        <Icon Type="delete" Theme="outline" />
    </Popconfirm>
</AntDesign.Tooltip>);
return result;
}
}